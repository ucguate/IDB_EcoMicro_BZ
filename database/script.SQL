-- ASSESSMENTS TABLE
CREATE TABLE assessments (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
customer_id INT,
user_id INT,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- ANSWERS TABLE
CREATE TABLE answers (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
question_id INT,
response VARCHAR(255),
score DECIMAL(5,2),
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- CUSTOMERS TABLE
CREATE TABLE customers (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
first_names VARCHAR(255),
last_names VARCHAR(255),
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- RESULTS TABLE
CREATE TABLE results (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
assessment_id INT,
score DECIMAL(5,2),
assesment_txt TEXT,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- USERS TABLE
CREATE TABLE users (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
first_names VARCHAR(255),
last_names VARCHAR(255),
email VARCHAR(255),
`password` VARCHAR(255),
user_level INT,
assesment_txt TEXT,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- USER_LEVELS TABLE
CREATE TABLE user_levels (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
`name` VARCHAR(255),
`desc` VARCHAR(255),
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);


-- SECTIONS TABLE
CREATE TABLE sections (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
title VARCHAR(255),
`desc` VARCHAR(255),
order INT,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- QUESTION_TYPES TABLE
CREATE TABLE question_types (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
`name` VARCHAR(255),
`desc` VARCHAR(255),
active BOOLEAN,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- QUESTIONS TABLE
CREATE TABLE questions (
id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,
title VARCHAR(255),
placeholder VARCHAR(512),
questions VARCHAR(1028),
scores VARCHAR(255),
`type` INT,
section INT,
active BOOLEAN,
created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ,
updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- ------------------- --
-- ADDING FOREIGN KEYS --
-- ------------------- --

-- ASSESMENTS -FK- customer_id
ALTER TABLE assesments
ADD FOREIGN KEY (customer_id) REFERENCES customers(id);
-- ASSESMENTS -FK- user_id
ALTER TABLE assesments
ADD FOREIGN KEY (user_id) REFERENCES users(id);

-- USERS -FK- user_level
ALTER TABLE users
ADD FOREIGN KEY (user_level) REFERENCES user_levels(id);

-- QUESTIONS -FK- type
ALTER TABLE questions
ADD FOREIGN KEY (`type`) REFERENCES question_types(id);
-- QUESTIONS -FK- section
ALTER TABLE questions
ADD FOREIGN KEY (sections) REFERENCES sections(id);

-- RESULTS -FK- assesment
ALTER TABLE results
ADD FOREIGN KEY (assessment_id) REFERENCES assesments(id);

-- ANSWERS -FK- question
ALTER TABLE answers
ADD FOREIGN KEY (question_id) REFERENCES questions(id);





